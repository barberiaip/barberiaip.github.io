<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarberiaIP - Panel de Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="public/css/style.css">
</head>

<body class="bg-gray-100 min-h-screen">

    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-4">
                    <button onclick="toggleMobileMenu()" class="md:hidden p-2 rounded-xl bg-gray-50">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <span class="font-black text-xl tracking-tighter text-slate-900">BARBERIA IP</span>
                </div>

                <div class="hidden md:flex items-center space-x-4">
                    <button onclick="router('home')"
                        class="nav-link px-3 py-2 text-sm font-bold hover:text-blue-600">Home</button>
                    <button onclick="router('agenda')"
                        class="nav-link px-3 py-2 text-sm font-bold hover:text-blue-600">Agenda</button>
                    <button onclick="router('caja')"
                        class="nav-link px-3 py-2 text-sm font-bold hover:text-blue-600">Caja</button>
                    <button onclick="router('clientes')"
                        class="nav-link px-3 py-2 text-sm font-bold hover:text-blue-600">Clientes</button>
                    <button onclick="router('servicios')"
                        class="nav-link px-3 py-2 text-sm font-bold hover:text-blue-600">Servicios</button>
                </div>

                <div class="flex items-center">
                    <span
                        class="text-[10px] bg-slate-900 text-white px-3 py-1 rounded-full font-bold uppercase">Nacho</span>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-gray-100 p-4 space-y-2">
            <button onclick="router('home')"
                class="block w-full text-left p-3 font-bold text-gray-700 hover:bg-gray-50 rounded-xl">Home</button>
            <button onclick="router('agenda')"
                class="block w-full text-left p-3 font-bold text-gray-700 hover:bg-gray-50 rounded-xl">Agenda</button>
            <button onclick="router('caja')"
                class="block w-full text-left p-3 font-bold text-gray-700 hover:bg-gray-50 rounded-xl">Caja</button>
            <button onclick="router('clientes')"
                class="block w-full text-left p-3 font-bold text-gray-700 hover:bg-gray-50 rounded-xl">Clientes</button>
            <button onclick="router('servicios')"
                class="block w-full text-left p-3 font-bold text-gray-700 hover:bg-gray-50 rounded-xl">Servicios</button>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto p-4 md:p-8">

        <div id="view-agenda" class="view hidden">
            <div class="mb-6">
                <h2 class="text-3xl font-black text-slate-900">Agenda</h2>
                <p class="text-gray-500">Gestioná los turnos y asistencia</p>
            </div>

            <div class="flex items-center gap-2 mb-6 overflow-x-auto pb-2 no-scrollbar">
                <button onclick="cambiarDia(-1)"
                    class="p-3 bg-white rounded-2xl shadow-sm border border-gray-100 flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
                <div class="flex-1 bg-white p-3 rounded-2xl shadow-sm border border-gray-100 text-center">
                    <span id="agenda-fecha-display" class="font-bold text-slate-800 text-lg text-capitalize">Cargando
                        fecha...</span>
                </div>
                <button onclick="cambiarDia(1)"
                    class="p-3 bg-white rounded-2xl shadow-sm border border-gray-100 flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M9 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>

            <div id="lista-turnos-agenda" class="space-y-4 pb-24"></div>

            <button onclick="openModal('modal-nuevo-turno')"
                class="fixed bottom-8 right-6 w-16 h-16 bg-slate-900 text-white rounded-full shadow-2xl flex items-center justify-center z-40 hover:scale-110 transition-transform active:scale-95">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4v16m8-8H4"></path>
                </svg>
            </button>
        </div>

        <div id="view-home" class="view hidden">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                    <h3 class="text-sm font-bold text-gray-400 uppercase">Ingresos Hoy</h3>
                    <p id="h-ingresos-hoy" class="text-3xl font-black text-green-600 mt-2">$0</p>
                </div>
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                    <h3 class="text-sm font-bold text-gray-400 uppercase">Turnos para Hoy</h3>
                    <p id="h-turnos-hoy" class="text-3xl font-black text-blue-600 mt-2">0</p>
                </div>
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                    <h3 class="text-sm font-bold text-gray-400 uppercase">Pendientes</h3>
                    <p id="h-pendientes-hoy" class="text-3xl font-black text-orange-500 mt-2">0</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-3xl shadow-xl border border-gray-100">
                    <h3 class="font-bold text-lg mb-4">Turnos de Hoy</h3>
                    <div id="home-lista-hoy" class="space-y-3"></div>
                </div>
                <div class="bg-white p-6 rounded-3xl shadow-xl border border-gray-100">
                    <h3 class="font-bold text-lg mb-4">Turnos de Mañana</h3>
                    <div id="home-lista-manana" class="space-y-3"></div>
                </div>
            </div>
        </div>

        <div id="view-caja" class="view hidden">
            <h2 class="text-3xl font-bold mb-8">Análisis de Caja</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-3xl shadow-md border-t-4 border-green-500">
                    <h4 class="text-gray-400 font-bold uppercase text-xs">Ingresos (Mes)</h4>
                    <p id="caja-ingresos-mes" class="text-3xl font-black">$0</p>
                </div>
                <div class="bg-white p-6 rounded-3xl shadow-md border-t-4 border-red-500">
                    <h4 class="text-gray-400 font-bold uppercase text-xs">Egresos (Mes)</h4>
                    <p id="caja-egresos-mes" class="text-3xl font-black">$0</p>
                </div>
                <div class="bg-white p-6 rounded-3xl shadow-md border-t-4 border-blue-500">
                    <h4 class="text-gray-400 font-bold uppercase text-xs">Balance Neto</h4>
                    <p id="caja-balance" class="text-3xl font-black">$0</p>
                </div>
            </div>
            <div class="bg-white p-8 rounded-3xl shadow-xl border border-gray-100">
                <h3 class="font-bold text-xl mb-6">Flujo de Ingresos vs Egresos</h3>
                <div class="h-80">
                    <canvas id="chartCaja"></canvas>
                </div>
            </div>
        </div>

        <div id="view-clientes" class="view hidden">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8">
                <div>
                    <h2 class="text-3xl font-black text-slate-900 tracking-tighter">Base de Clientes</h2>
                    <p class="text-gray-500">Historial y datos de contacto</p>
                </div>
                <button onclick="openModal('modal-nuevo-cliente')"
                    class="w-full md:w-auto bg-blue-600 text-white px-6 py-4 rounded-2xl font-bold shadow-lg hover:bg-blue-700 transition active:scale-95">
                    + Agregar Nuevo Cliente
                </button>
            </div>

            <div class="hidden md:block bg-white rounded-3xl shadow-sm overflow-hidden border border-gray-100">
                <table class="w-full text-left">
                    <thead class="bg-gray-50 border-b">
                        <tr>
                            <th class="p-4 text-xs font-bold uppercase text-gray-400">Cliente</th>
                            <th class="p-4 text-xs font-bold uppercase text-gray-400">Teléfono</th>
                            <th class="p-4 text-xs font-bold uppercase text-gray-400 text-center">Visitas</th>
                            <th class="p-4 text-xs font-bold uppercase text-gray-400 text-right">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="lista-clientes-tabla" class="divide-y divide-gray-50"></tbody>
                </table>
            </div>

            <div id="lista-clientes-mobile" class="md:hidden space-y-4 pb-20">
            </div>
        </div>

        <div id="view-servicios" class="view hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">Configuración</h2>
            </div>
            <div class="flex border-b border-gray-200 mb-6">
                <button onclick="switchTab('tab-servicios')" id="btn-tab-servicios"
                    class="px-6 py-3 border-b-2 border-black font-bold text-sm">Servicios (Cortes)</button>
                <button onclick="switchTab('tab-productos')" id="btn-tab-productos"
                    class="px-6 py-3 border-b-2 border-transparent text-gray-500 font-bold text-sm">Productos
                    (Venta/Stock)</button>
            </div>

            <div id="tab-servicios" class="tab-content">
                <div class="flex justify-end mb-4">
                    <button onclick="openModalServicio()"
                        class="bg-black text-white px-4 py-2 rounded-xl text-sm font-bold">+ Nuevo Servicio</button>
                </div>
                <div class="bg-white rounded-3xl shadow-xl overflow-hidden border">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50 uppercase text-[10px] font-bold text-gray-400">
                            <tr>
                                <th class="p-4">Nombre</th>
                                <th class="p-4">Precio</th>
                                <th class="p-4">Duración</th>
                                <th class="p-4 text-right">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="lista-servicios-tabla" class="divide-y"></tbody>
                    </table>
                </div>
            </div>

            <div id="tab-productos" class="tab-content hidden">
                <div class="flex justify-end mb-4">
                    <button onclick="openModal('modal-nuevo-producto')"
                        class="bg-black text-white px-4 py-2 rounded-xl text-sm font-bold">+ Nuevo Producto</button>
                </div>
                <div class="bg-white rounded-3xl shadow-xl overflow-hidden border">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50 uppercase text-[10px] font-bold text-gray-400">
                            <tr>
                                <th class="p-4">Producto</th>
                                <th class="p-4">Precio Venta</th>
                                <th class="p-4 text-right">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="lista-productos-tabla" class="divide-y"></tbody>
                    </table>
                </div>
            </div>
        </div>

    </main>

    <div id="modal-nuevo-cliente"
        class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[2.5rem] w-full max-w-md p-8 shadow-2xl">
            <h3 class="text-2xl font-black text-slate-900 mb-6">Nuevo Cliente</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1 ml-1">Nombre</label>
                    <input type="text" id="c-nombre"
                        class="w-full bg-gray-50 border-none rounded-2xl p-4 focus:ring-2 focus:ring-blue-500 font-bold">
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1 ml-1">Apellido</label>
                    <input type="text" id="c-apellido"
                        class="w-full bg-gray-50 border-none rounded-2xl p-4 focus:ring-2 focus:ring-blue-500 font-bold">
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1 ml-1">Teléfono (Celular)</label>
                    <input type="tel" id="c-telefono"
                        class="w-full bg-gray-50 border-none rounded-2xl p-4 focus:ring-2 focus:ring-blue-500 font-bold">
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase mb-1 ml-1">Edad</label>
                    <input type="number" id="c-edad"
                        class="w-full bg-gray-50 border-none rounded-2xl p-4 focus:ring-2 focus:ring-blue-500 font-bold">
                </div>
            </div>
            <div class="grid grid-cols-2 gap-3 mt-8">
                <button onclick="closeModal('modal-nuevo-cliente')"
                    class="p-4 rounded-2xl font-bold text-gray-500 hover:bg-gray-100 transition">Cancelar</button>
                <button onclick="guardarClienteNuevo()"
                    class="p-4 bg-blue-600 text-white rounded-2xl font-bold shadow-lg shadow-blue-200 hover:bg-blue-700 transition">Guardar</button>
            </div>
        </div>
    </div>

    <div id="modal-nuevo-servicio"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-3xl p-8 shadow-2xl">
            <h3 class="text-xl font-bold mb-4">Configurar Servicio</h3>
            <div class="space-y-3">
                <input type="text" id="s-nombre" placeholder="Nombre"
                    class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                <input type="number" id="s-precio" placeholder="Precio ($)"
                    class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                <input type="number" id="s-duracion" placeholder="Minutos"
                    class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
            </div>
            <div class="flex gap-2 mt-6">
                <button onclick="guardarServicio()"
                    class="flex-1 bg-black text-white py-3 rounded-xl font-bold">Guardar</button>
                <button onclick="closeModal('modal-nuevo-servicio')"
                    class="flex-1 bg-gray-100 py-3 rounded-xl">Cerrar</button>
            </div>
        </div>
    </div>

    <div id="modal-nuevo-producto"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-3xl p-8 shadow-2xl">
            <h3 class="text-xl font-bold mb-4">Cargar Producto</h3>
            <input type="text" id="p-nombre" placeholder="Nombre"
                class="w-full p-3 bg-gray-50 rounded-xl mb-3 border-none ring-1 ring-gray-200">
            <input type="number" id="p-precio" placeholder="Precio Venta"
                class="w-full p-3 bg-gray-50 rounded-xl mb-6 border-none ring-1 ring-gray-200">
            <div class="flex gap-2">
                <button onclick="guardarProducto()"
                    class="flex-1 bg-black text-white py-3 rounded-xl font-bold">Guardar</button>
                <button onclick="closeModal('modal-nuevo-producto')"
                    class="flex-1 bg-gray-100 py-3 rounded-xl">Cerrar</button>
            </div>
        </div>
    </div>

    <div id="modal-nuevo-turno"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-3xl p-8 shadow-2xl">
            <h3 class="text-2xl font-bold mb-6">Turno Manual</h3>
            <div class="space-y-4">
                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase ml-1">¿Cliente existente?</label>
                    <select id="m-cliente-existente" onchange="seleccionarClienteExistente(this.value)"
                        class="w-full p-3 bg-blue-50 rounded-xl border-none ring-1 ring-blue-100 text-sm">
                        <option value="">-- Seleccionar cliente --</option>
                    </select>
                </div>

                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase ml-1">Fecha del Turno</label>
                    <input type="date" id="m-fecha"
                        class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="m-nombre" placeholder="Nombre"
                        class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                    <input type="text" id="m-apellido" placeholder="Apellido"
                        class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <input type="tel" id="m-telefono" placeholder="Teléfono"
                        class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                    <input type="time" id="m-hora"
                        class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">
                </div>

                <input type="number" id="m-edad" placeholder="Edad"
                    class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200">

                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase ml-1">Servicio</label>
                    <select id="m-servicio"
                        class="w-full p-3 bg-gray-50 rounded-xl border-none ring-1 ring-gray-200"></select>
                </div>

                <div class="flex gap-3 pt-4">
                    <button onclick="guardarTurnoManual()"
                        class="flex-1 bg-black text-white py-4 rounded-2xl font-bold shadow-lg">Guardar</button>
                    <button onclick="closeModal('modal-nuevo-turno')"
                        class="flex-1 bg-gray-100 text-gray-600 py-4 rounded-2xl font-bold">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="admin/js/app.js"></script>
</body>

</html>